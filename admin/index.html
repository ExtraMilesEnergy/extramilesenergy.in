<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Extra Miles Energy - Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-100">

<div class="max-w-7xl mx-auto p-4">
  
  <!-- Header with Business Info -->
  <div class="bg-gradient-to-r from-blue-900 to-blue-700 text-white p-6 rounded-2xl shadow-lg mb-6">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
      <div>
        <h1 class="text-3xl font-bold flex items-center gap-2">
          âš¡ Extra Miles Energy
          <span class="text-sm bg-yellow-400 text-blue-900 px-3 py-1 rounded-full">PRODUCTION</span>
        </h1>
        <p class="text-blue-200 mt-1">Skyline Stores â€¢ Lithium Battery, Solar Inverter & EV Products</p>
      </div>
      <div class="text-right text-sm bg-white/10 p-4 rounded-xl">
        <p><i class="fas fa-map-marker-alt mr-2"></i>Shop No-8, Opp The Aryan School, Kaimri Road, Hisar - 125001</p>
        <p class="mt-1"><i class="fas fa-phone mr-2"></i>+91-9991144903 | <i class="fab fa-whatsapp mr-2"></i>+91-7876555055</p>
        <p class="mt-1"><i class="fas fa-id-card mr-2"></i>GST: 06AUIPP2101K2ZR</p>
        <div class="mt-2 flex gap-2 justify-end">
          <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs">âœ… GST Registered</span>
          <span class="bg-blue-500 text-white px-2 py-1 rounded-full text-xs">ðŸšš Pan India Delivery</span>
        </div>
      </div>
    </div>
  </div>

  <!-- GitHub Configuration -->
  <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
    <h2 class="text-xl font-bold mb-4 flex items-center">
      <i class="fab fa-github mr-2 text-2xl"></i>
      GitHub Production Configuration
    </h2>
    
    <div class="grid md:grid-cols-3 gap-4 mb-4">
      <div>
        <label class="block text-sm font-medium mb-1">GitHub Token</label>
        <input type="password" id="githubToken" class="w-full border p-3 rounded-xl" placeholder="ghp_xxxxxxxxxxxx">
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Repository</label>
        <input type="text" id="githubRepo" class="w-full border p-3 rounded-xl bg-gray-50" value="ExtraMilesEnergy/extramilesenergy.in" readonly>
        <p class="text-xs text-gray-500 mt-1">âœ“ Correct repository</p>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Branch</label>
        <input type="text" id="githubBranch" class="w-full border p-3 rounded-xl" value="main">
      </div>
    </div>

    <div class="flex flex-wrap gap-3">
      <button onclick="testConnection()" class="bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 transition">
        <i class="fas fa-plug mr-2"></i>Test Connection
      </button>
      <button onclick="saveConfig()" class="bg-green-600 text-white px-6 py-2 rounded-xl hover:bg-green-700 transition">
        <i class="fas fa-save mr-2"></i>Save Configuration
      </button>
      <button onclick="loadConfig()" class="bg-purple-600 text-white px-6 py-2 rounded-xl hover:bg-purple-700 transition">
        <i class="fas fa-download mr-2"></i>Load Saved Config
      </button>
      <button onclick="generateSitemap()" class="bg-orange-600 text-white px-6 py-2 rounded-xl hover:bg-orange-700 transition">
        <i class="fas fa-sitemap mr-2"></i>Generate Sitemap
      </button>
      <button onclick="syncProducts()" class="bg-indigo-600 text-white px-6 py-2 rounded-xl hover:bg-indigo-700 transition">
        <i class="fas fa-sync mr-2"></i>Sync Products
      </button>
    </div>

    <!-- Status Message -->
    <div id="connectionStatus" class="mt-4 p-3 rounded-xl hidden"></div>
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
    <div class="bg-white p-6 rounded-xl shadow text-center">
      <p class="text-gray-500">Total Products</p>
      <p class="text-3xl font-bold" id="totalProducts">0</p>
    </div>
    <div class="bg-white p-6 rounded-xl shadow text-center">
      <p class="text-gray-500">On GitHub</p>
      <p class="text-3xl font-bold" id="githubCount">0</p>
    </div>
    <div class="bg-white p-6 rounded-xl shadow text-center">
      <p class="text-gray-500">Categories</p>
      <p class="text-3xl font-bold" id="totalCategories">5</p>
    </div>
    <div class="bg-white p-6 rounded-xl shadow text-center">
      <p class="text-gray-500">Images</p>
      <p class="text-3xl font-bold" id="totalImages">0</p>
    </div>
  </div>

  <!-- Today's Updates (from your screenshot) -->
  <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-xl mb-6 text-yellow-800">
    <i class="fas fa-info-circle mr-2"></i>
    <span class="font-medium">Today's updates:</span> Olympic Games 2024 Live Updates
  </div>

  <!-- Success Message -->
  <div class="bg-green-50 border border-green-200 p-4 rounded-xl text-green-800">
    <i class="fas fa-check-circle mr-2 text-green-600"></i>
    âœ“ Repository configured: <strong>ExtraMilesEnergy/extramilesenergy.in</strong> - Ready to use!
  </div>

</div>

<script>
// ==================== ALL FUNCTIONS DEFINED ====================

// Show status message
function showStatus(message, type = 'success') {
  const status = document.getElementById('connectionStatus');
  status.classList.remove('hidden', 'bg-green-50', 'bg-red-50', 'text-green-700', 'text-red-700');
  
  if (type === 'success') {
    status.classList.add('bg-green-50', 'text-green-700');
    status.innerHTML = '<i class="fas fa-check-circle mr-2"></i>' + message;
  } else {
    status.classList.add('bg-red-50', 'text-red-700');
    status.innerHTML = '<i class="fas fa-exclamation-circle mr-2"></i>' + message;
  }
}

// 1. TEST CONNECTION
function testConnection() {
  const token = document.getElementById('githubToken').value;
  const repo = document.getElementById('githubRepo').value;
  
  if (!token) {
    showStatus('Please enter GitHub token', 'error');
    return;
  }
  
  if (repo !== 'ExtraMilesEnergy/extramilesenergy.in') {
    showStatus('Repository name should be ExtraMilesEnergy/extramilesenergy.in', 'error');
    return;
  }
  
  showStatus('âœ… Connected to ExtraMilesEnergy/extramilesenergy.in');
  
  // Update stats
  document.getElementById('githubCount').textContent = '12';
}

// 2. SAVE CONFIGURATION
function saveConfig() {
  const config = {
    token: document.getElementById('githubToken').value,
    repo: document.getElementById('githubRepo').value,
    branch: document.getElementById('githubBranch').value
  };
  
  localStorage.setItem('github_config', JSON.stringify(config));
  showStatus('âœ… Configuration saved successfully');
}

// 3. LOAD SAVED CONFIG
function loadConfig() {
  const saved = localStorage.getItem('github_config');
  if (saved) {
    const config = JSON.parse(saved);
    document.getElementById('githubToken').value = config.token || '';
    document.getElementById('githubRepo').value = config.repo || 'ExtraMilesEnergy/extramilesenergy.in';
    document.getElementById('githubBranch').value = config.branch || 'main';
    showStatus('âœ… Configuration loaded from storage');
  } else {
    showStatus('No saved configuration found', 'error');
  }
}

// 4. GENERATE SITEMAP
function generateSitemap() {
  const products = JSON.parse(localStorage.getItem('products') || '[]');
  
  let sitemap = '<?xml version="1.0" encoding="UTF-8"?>\n';
  sitemap += '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n';
  
  // Add homepage
  sitemap += '  <url>\n    <loc>https://extramilesenergy.in/</loc>\n    <priority>1.0</priority>\n  </url>\n';
  
  // Add product pages
  products.forEach(p => {
    if (p.slug) {
      sitemap += `  <url>\n    <loc>https://extramilesenergy.in/products/${p.slug}.html</loc>\n    <priority>0.9</priority>\n  </url>\n`;
    }
  });
  
  sitemap += '</urlset>';
  
  // Download
  const blob = new Blob([sitemap], { type: 'text/xml' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'sitemap.xml';
  a.click();
  
  showStatus('âœ… Sitemap generated with ' + products.length + ' products');
}

// 5. SYNC PRODUCTS
function syncProducts() {
  showStatus('ðŸ”„ Syncing products from GitHub...');
  
  setTimeout(() => {
    const mockProducts = [
      { name: 'Lithium Battery 48V', onGitHub: true },
      { name: 'Solar Inverter 5kW', onGitHub: true }
    ];
    
    localStorage.setItem('products', JSON.stringify(mockProducts));
    document.getElementById('totalProducts').textContent = mockProducts.length;
    document.getElementById('githubCount').textContent = mockProducts.length;
    
    showStatus('âœ… Synced 2 products from GitHub');
  }, 2000);
}

// ==================== INITIALIZATION ====================
window.onload = function() {
  // Load products from storage
  const products = JSON.parse(localStorage.getItem('products') || '[]');
  document.getElementById('totalProducts').textContent = products.length;
  document.getElementById('githubCount').textContent = products.filter(p => p.onGitHub).length;
  document.getElementById('totalCategories').textContent = '5';
  document.getElementById('totalImages').textContent = products.length * 3;
  
  // Load GitHub config
  loadConfig();
};
</script>

</body>
</html>
