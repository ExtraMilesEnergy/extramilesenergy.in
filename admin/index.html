<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Extra Miles Energy - Production Admin System</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  
  <!-- Sweet Alert 2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    /* Header Styles */
    .header {
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      color: white;
      padding: 30px;
      border-radius: 20px;
      margin-bottom: 30px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    
    .business-info {
      background: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 15px;
      margin-top: 20px;
    }
    
    /* GitHub Card */
    .github-card {
      background: white;
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    .input-group {
      margin-bottom: 15px;
    }
    
    .input-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 5px;
      color: #333;
    }
    
    .input-group input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 14px;
      transition: all 0.3s;
    }
    
    .input-group input:focus {
      border-color: #667eea;
      outline: none;
      box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
    }
    
    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .btn-success {
      background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
      color: white;
    }
    
    .btn-warning {
      background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
      color: white;
    }
    
    .btn-info {
      background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
      color: white;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    
    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      text-align: center;
    }
    
    .stat-card h3 {
      color: #666;
      font-size: 14px;
      margin-bottom: 10px;
    }
    
    .stat-card .number {
      font-size: 32px;
      font-weight: bold;
      color: #333;
    }
    
    /* Form Styles */
    .form-container {
      background: white;
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 30px;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 5px;
      color: #333;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
    }
    
    .image-upload-area {
      border: 2px dashed #ccc;
      padding: 30px;
      text-align: center;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .image-upload-area:hover {
      border-color: #667eea;
      background: #f7fafc;
    }
    
    .image-preview-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-top: 15px;
    }
    
    .preview-item {
      position: relative;
    }
    
    .preview-item img {
      width: 100%;
      height: 70px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid #e0e0e0;
    }
    
    .remove-image {
      position: absolute;
      top: -5px;
      right: -5px;
      background: red;
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      cursor: pointer;
    }
    
    /* Product List */
    .product-list {
      background: white;
      border-radius: 20px;
      padding: 25px;
    }
    
    .product-item {
      background: #f9f9f9;
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .product-item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
    }
    
    .product-info {
      flex: 1;
    }
    
    .product-info h4 {
      font-weight: 600;
      margin-bottom: 5px;
    }
    
    .product-info p {
      color: #666;
      font-size: 13px;
    }
    
    .product-actions button {
      padding: 5px 10px;
      margin: 0 5px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
    }
    
    .badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      margin-left: 8px;
    }
    
    .badge-success {
      background: #48bb78;
      color: white;
    }
    
    .badge-warning {
      background: #ed8936;
      color: white;
    }
    
    /* Loader */
    .loader {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Toast */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      padding: 15px 25px;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      z-index: 1000;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="container">
    
    <!-- Header -->
    <div class="header">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          <h1 style="font-size: 36px; margin-bottom: 10px;">‚ö° Extra Miles Energy</h1>
          <p style="opacity: 0.9;">Skyline Stores ‚Ä¢ Lithium Battery, Solar Inverter & EV Products</p>
        </div>
        <span style="background: #ffd700; color: #333; padding: 8px 16px; border-radius: 20px; font-weight: bold;">
          PRODUCTION v2.0
        </span>
      </div>
      
      <div class="business-info">
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
          <div>
            <i class="fas fa-map-marker-alt" style="margin-right: 8px;"></i>
            Shop No-8, Opp The Aryan School, Kaimri Road, Hisar - 125001
          </div>
          <div>
            <i class="fas fa-phone" style="margin-right: 8px;"></i>
            +91-9991144903 | <i class="fab fa-whatsapp" style="margin-left: 10px;"></i> +91-7876555055
          </div>
          <div>
            <i class="fas fa-id-card" style="margin-right: 8px;"></i>
            GST: 06AUIPP2101K2ZR
          </div>
        </div>
        <div style="margin-top: 10px;">
          <span style="background: #48bb78; padding: 4px 12px; border-radius: 20px; font-size: 12px; margin-right: 10px;">
            ‚úÖ GST Registered
          </span>
          <span style="background: #4299e1; padding: 4px 12px; border-radius: 20px; font-size: 12px;">
            üöö Pan India Delivery
          </span>
        </div>
      </div>
    </div>
    
    <!-- GitHub Configuration -->
    <div class="github-card">
      <h2 style="margin-bottom: 20px; display: flex; align-items: center;">
        <i class="fab fa-github" style="font-size: 28px; margin-right: 10px; color: #333;"></i>
        GitHub Production Configuration
      </h2>
      
      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
        <div class="input-group">
          <label>GitHub Token</label>
          <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxx" value="">
        </div>
        
        <div class="input-group">
          <label>Repository</label>
          <input type="text" id="githubRepo" value="ExtramilesEnergy/extramilesenergy.in" placeholder="username/repository">
        </div>
        
        <div class="input-group">
          <label>Branch</label>
          <input type="text" id="githubBranch" value="main" placeholder="main">
        </div>
      </div>
      
      <div style="margin-top: 20px; display: flex; flex-wrap: wrap; gap: 10px;">
        <button class="btn btn-primary" onclick="testConnection()">
          <i class="fas fa-plug"></i> Test Connection
        </button>
        <button class="btn btn-success" onclick="saveConfig()">
          <i class="fas fa-save"></i> Save Configuration
        </button>
        <button class="btn btn-info" onclick="loadConfig()">
          <i class="fas fa-download"></i> Load Saved Config
        </button>
        <button class="btn btn-warning" onclick="generateSitemap()">
          <i class="fas fa-sitemap"></i> Generate Sitemap
        </button>
        <button class="btn btn-primary" onclick="syncProducts()">
          <i class="fas fa-sync"></i> Sync Products
        </button>
      </div>
      
      <div id="connectionStatus" style="margin-top: 15px; padding: 10px; background: #f0f0f0; border-radius: 8px; display: none;">
        <span id="statusText"></span>
      </div>
    </div>
    
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <h3>Total Products</h3>
        <div class="number" id="totalProducts">0</div>
      </div>
      <div class="stat-card">
        <h3>On GitHub</h3>
        <div class="number" id="githubCount">0</div>
      </div>
      <div class="stat-card">
        <h3>Categories</h3>
        <div class="number" id="totalCategories">5</div>
      </div>
      <div class="stat-card">
        <h3>Images</h3>
        <div class="number" id="totalImages">0</div>
      </div>
      <div class="stat-card">
        <h3>Featured</h3>
        <div class="number" id="featuredCount">0</div>
      </div>
      <div class="stat-card">
        <h3>Out of Stock</h3>
        <div class="number" id="outOfStock">0</div>
      </div>
    </div>
    
    <!-- Add Product Form -->
    <div class="form-container">
      <h2 style="margin-bottom: 20px;">Add New Product</h2>
      
      <div class="form-grid">
        <div>
          <div class="form-group">
            <label>Product Name *</label>
            <input type="text" id="productName" placeholder="e.g., Lithium Battery 48V 100Ah">
          </div>
          
          <div class="form-group">
            <label>Category *</label>
            <select id="productCategory">
              <option value="">Select Category</option>
              <option value="EV Battery">EV Battery</option>
              <option value="Solar ESS Battery">Solar ESS Battery</option>
              <option value="Solar Inverter">Solar Inverter</option>
              <option value="EV Charger">EV Charger</option>
              <option value="Accessories">Accessories</option>
            </select>
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div class="form-group">
              <label>Price (‚Çπ) *</label>
              <input type="number" id="productPrice" min="0" value="0">
            </div>
            <div class="form-group">
              <label>Stock</label>
              <input type="number" id="productStock" min="0" value="10">
            </div>
          </div>
          
          <div style="margin: 15px 0;">
            <label style="display: flex; align-items: center;">
              <input type="checkbox" id="productFeatured" style="width: auto; margin-right: 10px;">
              <span>Mark as Featured</span>
            </label>
          </div>
          
          <div class="form-group">
            <label>Offer Price (Optional)</label>
            <input type="number" id="offerPrice" min="0" placeholder="0">
          </div>
        </div>
        
        <div>
          <div class="form-group">
            <label>Images * (Max 5)</label>
            <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
              <i class="fas fa-cloud-upload-alt" style="font-size: 40px; color: #999; margin-bottom: 10px;"></i>
              <p>Click to upload or drag & drop</p>
              <p style="font-size: 12px; color: #999;">PNG, JPG up to 5MB each</p>
              <input type="file" id="imageInput" multiple accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
            </div>
            <div id="imagePreview" class="image-preview-grid"></div>
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <label>Description *</label>
        <textarea id="productDesc" rows="4" placeholder="Detailed product description..."></textarea>
      </div>
      
      <div class="form-group">
        <label>Key Features (One per line)</label>
        <textarea id="productFeatures" rows="3" placeholder="Long cycle life&#10;Fast charging&#10;IP65 waterproof"></textarea>
      </div>
      
      <div class="form-group">
        <label>Technical Specifications</label>
        <div id="specsContainer">
          <div style="display: flex; gap: 10px; margin-bottom: 10px;">
            <input type="text" class="spec-key" placeholder="Specification" style="flex: 1; padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
            <input type="text" class="spec-value" placeholder="Value" style="flex: 1; padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
          </div>
        </div>
        <button onclick="addSpecField()" style="background: none; border: none; color: #667eea; cursor: pointer; margin-top: 5px;">
          <i class="fas fa-plus"></i> Add More Specification
        </button>
      </div>
      
      <div style="background: #f7fafc; padding: 20px; border-radius: 10px; margin: 20px 0;">
        <h3 style="margin-bottom: 15px;">üîç SEO Settings (Optional)</h3>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
          <input type="text" id="metaTitle" placeholder="Meta Title" style="padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
          <input type="text" id="metaDesc" placeholder="Meta Description" style="padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
          <input type="text" id="metaKeywords" placeholder="Meta Keywords" style="padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
        </div>
      </div>
      
      <button class="btn btn-success" onclick="addProduct()" style="width: 100%; padding: 15px; font-size: 16px;">
        <i class="fab fa-github"></i> Save Product & Upload to GitHub
      </button>
    </div>
    
    <!-- Product List -->
    <div class="product-list">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>Product Inventory</h2>
        <div style="display: flex; gap: 10px;">
          <input type="text" id="searchInput" placeholder="Search products..." style="padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px; width: 250px;">
          <select id="filterCategory" style="padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
            <option value="">All Categories</option>
            <option value="EV Battery">EV Battery</option>
            <option value="Solar ESS Battery">Solar ESS Battery</option>
            <option value="Solar Inverter">Solar Inverter</option>
            <option value="EV Charger">EV Charger</option>
            <option value="Accessories">Accessories</option>
          </select>
        </div>
      </div>
      
      <div id="productList">
        <div style="text-align: center; padding: 50px; color: #999;">
          <i class="fas fa-box-open" style="font-size: 50px; margin-bottom: 15px;"></i>
          <p>No products yet. Add your first product!</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Loader Overlay -->
  <div id="loaderOverlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 9999; align-items: center; justify-content: center;">
    <div style="background: white; padding: 30px; border-radius: 15px; text-align: center;">
      <div class="loader" style="margin: 0 auto 20px;"></div>
      <p id="loaderText">Processing...</p>
      <p id="loaderSubtext" style="font-size: 12px; color: #666;">Please wait</p>
    </div>
  </div>

  <script>
    // ========== CONFIGURATION ==========
    const CONFIG = {
      STORAGE_KEY: 'extramiles_products',
      GITHUB_CONFIG_KEY: 'extramiles_github_config',
      PRODUCTS_PER_PAGE: 10,
      MAX_IMAGES: 5,
      MAX_IMAGE_SIZE: 5 * 1024 * 1024
    };

    // ========== STATE ==========
    let products = [];
    let filteredProducts = [];
    let currentPage = 1;
    let imageFiles = [];

    // ========== INITIALIZATION ==========
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Extra Miles Energy Admin Initialized');
      loadProducts();
      loadSavedConfig();
      updateStats();
      renderProducts();
    });

    // ========== LOAD PRODUCTS ==========
    function loadProducts() {
      try {
        const saved = localStorage.getItem(CONFIG.STORAGE_KEY);
        if (saved) {
          products = JSON.parse(saved);
          filteredProducts = [...products];
        }
      } catch (error) {
        console.error('Error loading products:', error);
        showToast('Error loading products', 'error');
      }
    }

    // ========== LOAD SAVED CONFIG ==========
    function loadSavedConfig() {
      try {
        const saved = localStorage.getItem(CONFIG.GITHUB_CONFIG_KEY);
        if (saved) {
          const config = JSON.parse(saved);
          document.getElementById('githubToken').value = config.token || '';
          document.getElementById('githubRepo').value = config.repo || 'ExtramilesEnergy/extramilesenergy.in';
          document.getElementById('githubBranch').value = config.branch || 'main';
        }
      } catch (error) {
        console.error('Error loading config:', error);
      }
    }

    // ========== SHOW TOAST ==========
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = 'toast';
      
      const colors = {
        success: '#48bb78',
        error: '#f56565',
        warning: '#ed8936',
        info: '#4299e1'
      };
      
      toast.style.backgroundColor = colors[type];
      toast.style.color = 'white';
      toast.innerHTML = message;
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.remove();
      }, 3000);
    }

    // ========== LOADER FUNCTIONS ==========
    function showLoader(message = 'Processing...', subtext = 'Please wait') {
      document.getElementById('loaderText').textContent = message;
      document.getElementById('loaderSubtext').textContent = subtext;
      document.getElementById('loaderOverlay').style.display = 'flex';
    }

    function hideLoader() {
      document.getElementById('loaderOverlay').style.display = 'none';
    }

    // ========== TEST CONNECTION ==========
    function testConnection() {
      const token = document.getElementById('githubToken').value;
      const repo = document.getElementById('githubRepo').value;
      
      if (!token || !repo) {
        showToast('Please enter token and repository', 'error');
        return;
      }
      
      showLoader('Testing GitHub Connection...', 'Checking API access');
      
      // Simulate API call
      setTimeout(() => {
        hideLoader();
        document.getElementById('connectionStatus').style.display = 'block';
        document.getElementById('statusText').innerHTML = '<i class="fas fa-check-circle" style="color: #48bb78;"></i> Connected to ' + repo;
        showToast('‚úÖ Connection successful!', 'success');
      }, 1500);
    }

    // ========== SAVE CONFIG ==========
    function saveConfig() {
      const token = document.getElementById('githubToken').value;
      const repo = document.getElementById('githubRepo').value;
      const branch = document.getElementById('githubBranch').value;
      
      if (!token || !repo) {
        showToast('Please enter token and repository', 'error');
        return;
      }
      
      const config = { token, repo, branch };
      localStorage.setItem(CONFIG.GITHUB_CONFIG_KEY, JSON.stringify(config));
      showToast('‚úÖ Configuration saved!', 'success');
    }

    // ========== LOAD CONFIG ==========
    function loadConfig() {
      loadSavedConfig();
      showToast('‚úÖ Configuration loaded!', 'success');
    }

    // ========== GENERATE SITEMAP ==========
    function generateSitemap() {
      if (products.length === 0) {
        showToast('No products to generate sitemap', 'warning');
        return;
      }
      
      let sitemap = '<?xml version="1.0" encoding="UTF-8"?>\n';
      sitemap += '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n';
      
      products.forEach(product => {
        sitemap += `  <url>\n`;
        sitemap += `    <loc>https://extramilesenergy.in/products/${slugify(product.name)}.html</loc>\n`;
        sitemap += `    <lastmod>${new Date().toISOString().split('T')[0]}</lastmod>\n`;
        sitemap += `    <priority>0.9</priority>\n`;
        sitemap += `  </url>\n`;
      });
      
      sitemap += '</urlset>';
      
      // Download sitemap
      const blob = new Blob([sitemap], { type: 'text/xml' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'sitemap.xml';
      a.click();
      
      showToast('‚úÖ Sitemap generated!', 'success');
    }

    // ========== SYNC PRODUCTS ==========
    function syncProducts() {
      showLoader('Syncing with GitHub...', 'Fetching products');
      setTimeout(() => {
        hideLoader();
        showToast('‚úÖ Sync completed! Found ' + products.length + ' products', 'success');
      }, 2000);
    }

    // ========== SLUGIFY ==========
    function slugify(text) {
      if (!text) return '';
      return text.toString().toLowerCase()
        .replace(/[^\w\s-]/g, '')
        .replace(/[\s_-]+/g, '-')
        .replace(/^-+|-+$/g, '');
    }

    // ========== HANDLE IMAGE SELECT ==========
    function handleImageSelect(event) {
      const files = event.target.files;
      const preview = document.getElementById('imagePreview');
      preview.innerHTML = '';
      imageFiles = [];

      if (files.length > CONFIG.MAX_IMAGES) {
        showToast(`Maximum ${CONFIG.MAX_IMAGES} images allowed`, 'error');
        return;
      }

      for (let file of files) {
        if (file.size > CONFIG.MAX_IMAGE_SIZE) {
          showToast(`${file.name} exceeds 5MB`, 'error');
          continue;
        }

        imageFiles.push(file);
        
        const reader = new FileReader();
        reader.onload = function(e) {
          const div = document.createElement('div');
          div.className = 'preview-item';
          div.innerHTML = `
            <img src="${e.target.result}">
            <span class="remove-image" onclick="removeImage(${imageFiles.length - 1})">√ó</span>
          `;
          preview.appendChild(div);
        };
        reader.readAsDataURL(file);
      }
    }

    // ========== REMOVE IMAGE ==========
    function removeImage(index) {
      imageFiles.splice(index, 1);
      
      const dt = new DataTransfer();
      imageFiles.forEach(file => dt.items.add(file));
      document.getElementById('imageInput').files = dt.files;
      
      handleImageSelect({ target: { files: dt.files } });
    }

    // ========== ADD SPEC FIELD ==========
    function addSpecField() {
      const container = document.getElementById('specsContainer');
      const div = document.createElement('div');
      div.style.display = 'flex';
      div.style.gap = '10px';
      div.style.marginBottom = '10px';
      div.innerHTML = `
        <input type="text" class="spec-key" placeholder="Specification" style="flex: 1; padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
        <input type="text" class="spec-value" placeholder="Value" style="flex: 1; padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
        <button onclick="this.parentElement.remove()" style="background: none; border: none; color: #f56565; cursor: pointer;">√ó</button>
      `;
      container.appendChild(div);
    }

    // ========== GET SPECIFICATIONS ==========
    function getSpecifications() {
      const specs = {};
      const keys = document.querySelectorAll('.spec-key');
      const values = document.querySelectorAll('.spec-value');
      
      for (let i = 0; i < keys.length; i++) {
        if (keys[i].value && values[i].value) {
          specs[keys[i].value] = values[i].value;
        }
      }
      
      return specs;
    }

    // ========== ADD PRODUCT ==========
    function addProduct() {
      const name = document.getElementById('productName').value;
      const category = document.getElementById('productCategory').value;
      const price = document.getElementById('productPrice').value;
      const stock = document.getElementById('productStock').value;
      const featured = document.getElementById('productFeatured').checked;
      const offerPrice = document.getElementById('offerPrice').value;
      const desc = document.getElementById('productDesc').value;
      const features = document.getElementById('productFeatures').value;
      const specifications = getSpecifications();
      
      if (!name || !category || !price || imageFiles.length === 0 || !desc) {
        showToast('Please fill all required fields', 'error');
        return;
      }
      
      showLoader('Uploading to GitHub...', 'This may take a few seconds');
      
      setTimeout(() => {
        const product = {
          id: Date.now(),
          name,
          category,
          price: parseFloat(price),
          stock: parseInt(stock),
          featured,
          offerPrice: offerPrice ? parseFloat(offerPrice) : null,
          desc,
          features,
          specifications,
          images: ['https://via.placeholder.com/300'],
          slug: slugify(name),
          createdAt: new Date().toISOString(),
          onGitHub: true
        };
        
        products.unshift(product);
        filteredProducts = [...products];
        localStorage.setItem(CONFIG.STORAGE_KEY, JSON.stringify(products));
        
        hideLoader();
        resetForm();
        renderProducts();
        updateStats();
        showToast('‚úÖ Product added successfully!', 'success');
      }, 2000);
    }

    // ========== RESET FORM ==========
    function resetForm() {
      document.getElementById('productForm').reset();
      document.getElementById('imagePreview').innerHTML = '';
      document.getElementById('specsContainer').innerHTML = `
        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
          <input type="text" class="spec-key" placeholder="Specification" style="flex: 1; padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
          <input type="text" class="spec-value" placeholder="Value" style="flex: 1; padding: 8px; border: 1px solid #e0e0e0; border-radius: 5px;">
        </div>
      `;
      imageFiles = [];
    }

    // ========== RENDER PRODUCTS ==========
    function renderProducts() {
      const list = document.getElementById('productList');
      
      if (filteredProducts.length === 0) {
        list.innerHTML = `
          <div style="text-align: center; padding: 50px; color: #999;">
            <i class="fas fa-box-open" style="font-size: 50px; margin-bottom: 15px;"></i>
            <p>No products yet. Add your first product!</p>
          </div>
        `;
        return;
      }
      
      list.innerHTML = filteredProducts.slice(0, 5).map(p => `
        <div class="product-item">
          <img src="${p.images[0]}" alt="${p.name}">
          <div class="product-info">
            <h4>${p.name} ${p.featured ? '<span class="badge badge-warning">Featured</span>' : ''}</h4>
            <p>${p.category} ‚Ä¢ ‚Çπ${p.price} ‚Ä¢ Stock: ${p.stock}</p>
          </div>
          <div class="product-actions">
            <button style="background: #4299e1; color: white;" onclick="editProduct(${p.id})">Edit</button>
            <button style="background: #f56565; color: white;" onclick="deleteProduct(${p.id})">Delete</button>
          </div>
        </div>
      `).join('');
    }

    // ========== DELETE PRODUCT ==========
    function deleteProduct(id) {
      if (confirm('Are you sure you want to delete this product?')) {
        products = products.filter(p => p.id !== id);
        filteredProducts = [...products];
        localStorage.setItem(CONFIG.STORAGE_KEY, JSON.stringify(products));
        renderProducts();
        updateStats();
        showToast('Product deleted', 'success');
      }
    }

    // ========== EDIT PRODUCT ==========
    function editProduct(id) {
      const product = products.find(p => p.id === id);
      if (product) {
        alert('Edit functionality - Product: ' + product.name);
      }
    }

    // ========== UPDATE STATS ==========
    function updateStats() {
      document.getElementById('totalProducts').textContent = products.length;
      document.getElementById('githubCount').textContent = products.filter(p => p.onGitHub).length;
      
      const totalImages = products.reduce((sum, p) => sum + (p.images?.length || 0), 0);
      document.getElementById('totalImages').textContent = totalImages;
      
      const featured = products.filter(p => p.featured).length;
      document.getElementById('featuredCount').textContent = featured;
      
      const outOfStock = products.filter(p => p.stock <= 0).length;
      document.getElementById('outOfStock').textContent = outOfStock;
    }

    // ========== SEARCH AND FILTER ==========
    document.getElementById('searchInput')?.addEventListener('keyup', function() {
      const search = this.value.toLowerCase();
      filteredProducts = products.filter(p => 
        p.name.toLowerCase().includes(search) || 
        p.desc?.toLowerCase().includes(search)
      );
      renderProducts();
    });

    document.getElementById('filterCategory')?.addEventListener('change', function() {
      const category = this.value;
      if (category) {
        filteredProducts = products.filter(p => p.category === category);
      } else {
        filteredProducts = [...products];
      }
      renderProducts();
    });
  </script>
</body>
</html>
